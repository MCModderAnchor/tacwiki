import{f as P,u as T,g as F,h as U,P as Y,t as B,i as G,j as w,k as y,l as n,m as V,n as L,p as J,R as K,q as M,s as W,v as N,x as X,y as Z,C as ee,z as ae,A as ue,B as te,D as ne,E as le,F as ce,G as Q,H as se,I as f}from"./app-D_aip97M.js";const ge=["/","/gunpack/","/model_guide/","/zh/","/gunpack/ammo/","/gunpack/animation/","/gunpack/attachment/","/gunpack/bolt_type/","/gunpack/first_gun/","/gunpack/first_gunpack/","/gunpack/gun_extra_damage/","/gunpack/gun_positioning/","/gunpack/gun_refit/","/gunpack/gun_sound/","/gunpack/hand_pos/","/gunpack/hud_icon/","/gunpack/ica/","/gunpack/language/","/gunpack/lod/","/gunpack/muzzle_flash/","/gunpack/recipe/","/gunpack/render_text/","/gunpack/shell_ejection/","/model_guide/model/","/model_guide/setting/","/model_guide/texture/","/zh/gunpack/-2_convert_from_legacy.html","/zh/gunpack/01_before_start.html","/zh/gunpack/02_first_pack.html","/zh/gunpack/03_pack_info.html","/zh/gunpack/04_lang.html","/zh/gunpack/60_recipe.html","/zh/gunpack/","/zh/model_guide/","/zh/model_guide/model.html","/zh/model_guide/setting.html","/zh/model_guide/texture.html","/zh/user_guide/","/zh/user_guide/attachment_lock.html","/zh/user_guide/dummy_ammo.html","/zh/user_guide/hide_tooltip.html","/zh/user_guide/install_gunpack.html","/zh/user_guide/welcome.html","/zh/gunpack/ammo/","/zh/gunpack/ammo/ammo.html","/zh/gunpack/attachment/","/zh/gunpack/attachment/attachment.html","/zh/gunpack/attachment/data.html","/zh/gunpack/block/01_prepare.html","/zh/gunpack/block/02_new_block.html","/zh/gunpack/block/03_recipe_filter.html","/zh/gunpack/block/","/zh/gunpack/gun/01_simple_gun.html","/zh/gunpack/gun/02_first_gun.html","/zh/gunpack/gun/03_sp_group_name.html","/zh/gunpack/gun/04_hand_pos.html","/zh/gunpack/gun/05_gun_position.html","/zh/gunpack/gun/06_lod.html","/zh/gunpack/gun/","/zh/gunpack/legacy/","/zh/gunpack/gun/animation/","/zh/gunpack/gun/animation/animation_group.html","/zh/gunpack/gun/animation/ica.html","/zh/gunpack/gun/animation/state_machine_script.html","/zh/gunpack/gun/data/","/zh/gunpack/gun/display/","/zh/gunpack/gun/display/hud_icon.html","/zh/gunpack/gun/display/sound.html","/zh/gunpack/legacy/ammo/","/zh/gunpack/legacy/animation/","/zh/gunpack/legacy/attachment/","/zh/gunpack/legacy/before_start/","/zh/gunpack/legacy/bolt_type/","/zh/gunpack/legacy/first_gun/","/zh/gunpack/legacy/first_gunpack/","/zh/gunpack/legacy/gun_extra_damage/","/zh/gunpack/legacy/gun_positioning/","/zh/gunpack/legacy/gun_refit/","/zh/gunpack/legacy/gun_sound/","/zh/gunpack/legacy/hand_pos/","/zh/gunpack/legacy/hud_icon/","/zh/gunpack/legacy/ica/","/zh/gunpack/legacy/language/","/zh/gunpack/legacy/muzzle_flash/","/zh/gunpack/legacy/recipe/","/zh/gunpack/legacy/render_text/","/zh/gunpack/legacy/shell_ejection/","/404.html"],ie="SEARCH_PRO_QUERY_HISTORY",v=Q(ie,[]),oe=()=>{const{queryHistoryCount:e}=f;return{enabled:e>0,queryHistory:v,addQueryHistory:i=>{},removeQueryHistory:i=>{v.value=[...v.value.slice(0,i),...v.value.slice(i+1)]}}},E=e=>ge[e.id]+("anchor"in e?`#${e.anchor}`:""),re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:he}=f,z=Q(re,[]),pe=()=>({enabled:he>0,resultHistory:z,addResultHistory:g=>{},removeResultHistory:g=>{z.value=[...z.value.slice(0,g),...z.value.slice(g+1)]}}),me=e=>{const g=ee(),i=F(),R=ae(),c=w(0),k=y(()=>c.value>0),h=ue([]);return te(()=>{const{search:H,terminate:b}=ne(),r=le(p=>{const t=p.join(" "),{searchFilter:l=o=>o,splitWord:x,suggestionsFilter:d,...m}=g.value;t?(c.value+=1,H(p.join(" "),i.value,m).then(o=>l(o,t,i.value,R.value)).then(o=>{c.value-=1,h.value=o}).catch(o=>{console.warn(o),c.value-=1,c.value||(h.value=[])})):h.value=[]},f.searchDelay-f.suggestDelay);L([e,i],([p])=>r(p),{immediate:!0}),ce(()=>{b()})}),{isSearching:k,results:h}};var de=P({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(e,{emit:g}){const i=T(),R=F(),c=U(Y),{addQueryHistory:k}=oe(),{enabled:h}=pe(),H=h,b=B(e,"queries"),{results:r,isSearching:p}=me(b);G({isQuery:!0,index:0});const t=w(0),l=w(0),x=y(()=>H),d=y(()=>r.value.length>0),m=y(()=>r.value[t.value]||null),o=()=>{t.value=t.value>0?t.value-1:r.value.length-1,l.value=m.value.contents.length-1},D=()=>{t.value=t.value<r.value.length-1?t.value+1:0,l.value=0},O=()=>{l.value<m.value.contents.length-1?l.value+=1:D()},$=()=>{l.value>0?l.value-=1:o()},S=a=>a.map(u=>se(u)?u:n(u[0],u[1])),A=a=>{if(a.type==="customField"){const u=X[a.index]||"$content",[q,_=""]=Z(u)?u[R.value].split("$content"):u.split("$content");return a.display.map(s=>n("div",S([q,...s,_])))}return a.display.map(u=>n("div",S(u)))},C=()=>{t.value=0,l.value=0,g("updateQuery",""),g("close")};return V("keydown",a=>{if(e.isFocusing&&d.value){if(a.key==="ArrowUp")$();else if(a.key==="ArrowDown")O();else if(a.key==="Enter"){const u=m.value.contents[l.value];k(e.queries.join(" ")),i.push(E(u)),C()}}}),L([t,l],()=>{var a;(a=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>n("div",{class:["search-pro-result-wrapper",{empty:e.queries.length?!d.value:!x.value}],id:"search-pro-results"},e.queries.length?p.value?n(J,{hint:c.value.searching}):d.value?n("ul",{class:"search-pro-result-list"},r.value.map(({title:a,contents:u},q)=>{const _=t.value===q;return n("li",{class:["search-pro-result-list-item",{active:_}]},[n("div",{class:"search-pro-result-title"},a||c.value.defaultTitle),u.map((s,I)=>{const j=_&&l.value===I;return n(K,{to:E(s),class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{k(e.queries.join(" ")),C()}},()=>[s.type==="text"?null:n(s.type==="title"?M:s.type==="heading"?W:N,{class:"search-pro-result-type"}),n("div",{class:"search-pro-result-content"},[s.type==="text"&&s.header?n("div",{class:"content-header"},s.header):null,n("div",A(s))])])})])})):c.value.emptyResult:c.value.emptyResult)}});export{de as default};
